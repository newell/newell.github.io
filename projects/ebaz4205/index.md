# Controlling the AD9834 DDS with the EBAZ4205 Zynq-SoC Board using ARTIQ

In this post, I’ll walk you through my project where I used the EBAZ4205 Zynq-SoC board to control an AD9834 DDS module by ZonRi Technology Co., Ltd. The AD9834 is a low-power DDS chip capable of generating sine, triangular, and square waves, and by leveraging ARTIQ, we can precisely control it.

I’ve contributed to the [ARTIQ](https://github.com/m-labs/artiq) and [ARTIQ-Zynq](https://git.m-labs.hk/M-Labs/artiq-zynq) repositories by adding support for the EBAZ4205 Zynq-SoC board. This board is a low-cost option that can be repurposed to work with ARTIQ, opening up a lot of possibilities for high-precision waveform generation.

I also added the core device driver for the AD9834 to ARTIQ, which allows us to control this DDS board seamlessly. Below, I’ll go through the setup, share some waveforms generated by the DDS, and show how phase modulation can be achieved using this configuration. It’s also worth mentioning that the AD9834 can perform frequency modulation (FM), although I’m not showing an example of that here.

## Setup on My Electronics Bench

Here's a photo of my setup on the electronics bench. You’ll see the EBAZ4205 Zynq-SoC board connected to the AD9834 module and the power supplies I used to drive them.

[![DSC03050](https://github.com/user-attachments/assets/731a3ca4-46eb-4a72-a98b-ae641e66b203)](https://github.com/user-attachments/assets/731a3ca4-46eb-4a72-a98b-ae641e66b203)

## EBAZ4205 Booting from SD Card

Here’s a screenshot of the console output when the EBAZ4205 boots up its firmware from the SD card. This demonstrates the successful initialization of the board and loading of the ARTIQ framework:

[![BootUp](https://github.com/user-attachments/assets/fa79df3e-303f-4b0e-babc-837fd266dabc)](https://github.com/user-attachments/assets/fa79df3e-303f-4b0e-babc-837fd266dabc)

## Waveforms Generated by the AD9834

The AD9834 is capable of generating a range of waveforms. Below are examples of the sine, triangular, and square waves that I captured during my experiments:

### Sine Wave

Here’s a screenshot of the sine wave generated by the DDS:

[![SDS1202X-E3](https://github.com/user-attachments/assets/26326387-156b-4368-b20c-cea7fa240559)](https://github.com/user-attachments/assets/26326387-156b-4368-b20c-cea7fa240559)

### Triangular Wave

This triangular wave is also produced by the AD9834:

[![SDS1202X-E5](https://github.com/user-attachments/assets/14d5e6e9-405f-4e00-810d-8764c432c7ca)](https://github.com/user-attachments/assets/14d5e6e9-405f-4e00-810d-8764c432c7ca)

### Square Wave

The square wave output shows how the AD9834 can handle different waveform outputs.

[![SDS1202X-E6](https://github.com/user-attachments/assets/227c06e5-7a0a-41b3-8f96-4f39e641268c)](https://github.com/user-attachments/assets/227c06e5-7a0a-41b3-8f96-4f39e641268c)

## Frequency and Phase Modulation Capability

Frequency and Phase modulation allows you to change the frequency and phase of a signal relative to another. Below is an example of phase modulation where I switch between quadrature waves (90 degrees phase difference) of the same frequency, switching at a rate of 10 µs:

[![SDS1202X-E1](https://github.com/user-attachments/assets/0f5f61bd-4b4f-4620-9fb1-222c1978b1f8)](https://github.com/user-attachments/assets/0f5f61bd-4b4f-4620-9fb1-222c1978b1f8)

## AD9834 Module Pinout and Connections

Here’s a photo of the bottom of the AD9834 module, showing the header pinout for easy reference:

[![BottomOfBoard](https://github.com/user-attachments/assets/c4724b66-1a81-43e4-95e1-4b1b6dbaf2ea)](https://github.com/user-attachments/assets/c4724b66-1a81-43e4-95e1-4b1b6dbaf2ea)

Below is a table that outlines how I connected the AD9834 module to the EBAZ4205 Zynq-SoC board:

| **Pin on AD9834 Module** | **Function**        | **Connection on Zynq Board**   |
|--------------------------|---------------------|--------------------------------|
| Pin 1                    | FSYNC               | GPIO X.X (Specify pin)         |
| Pin 2                    | SCLK                | GPIO X.X (Specify pin)         |
| Pin 3                    | SDATA               | GPIO X.X (Specify pin)         |
| Pin 4                    | Ground              | GND                           |
| Pin 5                    | VCC                 | 3.3V                          |
| Pin 6                    | IOUT                | Analog output                  |

[![DSC03048](https://github.com/user-attachments/assets/7a002b01-3c96-41d3-b9a4-e25563e07b14)](https://github.com/user-attachments/assets/7a002b01-3c96-41d3-b9a4-e25563e07b14)

[![DSC03049](https://github.com/user-attachments/assets/98e24dab-bcec-4c63-b437-835fa0fcd75c)](https://github.com/user-attachments/assets/98e24dab-bcec-4c63-b437-835fa0fcd75c)

[![DSC03053](https://github.com/user-attachments/assets/dfe61ac3-742d-4398-aecf-7c9b6ac7c437)](https://github.com/user-attachments/assets/dfe61ac3-742d-4398-aecf-7c9b6ac7c437)

## Conclusion

By integrating the EBAZ4205 Zynq-SoC board with the AD9834 module through ARTIQ, I’ve been able to generate precise waveforms and experiment with phase modulation. While this post mainly focuses on phase modulation, the AD9834 also supports frequency modulation (FM), which adds even more versatility to this setup. The combination of the low-cost Zynq board and the flexibility of ARTIQ provides a powerful platform for waveform generation and signal processing.

